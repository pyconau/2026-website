---
import { getCollection } from "astro:content";
import Footer from "../components/Footer.astro";
import HeaderBreadcrumbs from "../components/header/HeaderBreadcrumbs.astro";
import PageHeader from "../components/header/PageHeader.astro";
import PageHeaderTitle from "../components/header/PageHeaderTitle.astro";
import NewsPostCard from "../components/NewsPostCard.astro";
import Base from "../layouts/Base.astro";

// TODO: Page shows category as is (e.g. DIRECTORS-DESK), should map to strings
// TODO: Color-ise the category
const [firstPost, ...morePosts] = (await getCollection("posts")).sort(
  (a, b) => b.data.published.valueOf() - a.data.published.valueOf()
);
---

<Base title="News & Updates">
  {
    /* TODO: in lemonnades version there's no lg:w-[45%] on the middle div in PageHeaderTitle - maybe make this optional? */
  }
  <PageHeader dark={false} starColour="lavender">
    <HeaderBreadcrumbs colour="charcoal" />
    <PageHeaderTitle textColour="charcoal" fullWidthTitle={true}>
      <h1>News & Updates</h1>
    </PageHeaderTitle>
  </PageHeader>

  <section>
    <div class="bg-stone pt-10 pb-20">
      <div class="container">
        <div class="lg:w-[85%] w-full mx-auto">
          <div class="space-y-5">
            <NewsPostCard slug={firstPost.slug} featured={true} />
            {morePosts.map((post) => <NewsPostCard slug={post.slug} />)}
          </div>
        </div>
      </div>
    </div>
  </section>

  <Footer />

  <!-- Main scripts (will be added in Phase 5) -->
  <script src="/src/scripts/animations.js"></script>
</Base>
