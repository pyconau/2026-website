---
import Base from './Base.astro';
import Navbar from '../components/Navbar.astro';
import SocialLinks from '../components/SocialLinks.astro';
import Footer from '../components/Footer.astro';
import ImageModal from '../components/ImageModal.astro';

export interface Props {
  title: string;
  published: Date;
  category: string;
}

const { title, published, category } = Astro.props;

// Category display names
const categoryNames = {
  'news': 'News & Announcements',
  'directors-desk': "From the Director's Desk",
  'uncategorised': 'Blog'
};

// Category colors
const getCategoryColor = (cat: string) => {
  if (cat === 'news') return 'text-purple-800';
  if (cat === 'directors-desk') return 'text-pycon-coral';
  return 'text-pycon-purple';
};
---

<Base title={title}>
  <Navbar />
  <section class="bg-brand-neutral">
    <div class="2xl:container mx-auto lg:px-20 px-5 pt-20 pb-40">
      <div class="max-w-[873px] 2xl:max-w-[1120px] mx-auto">
        <!-- Back link -->
        <div class="mb-8">
          <a
            href="/"
            class="inline-flex items-center gap-2 text-pycon-black hover:text-pycon-purple font-jakarta font-semibold text-base"
          >
            <svg class="w-4 h-4 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
            </svg>
            <span>Back to Home</span>
          </a>
        </div>

        <!-- Post header -->
        <header class="mb-12">
          <div class="flex items-center justify-between gap-3 mb-4">
            <span class={`${getCategoryColor(category)} font-roboto-slab font-semibold text-xs tracking-wider`}>
              {categoryNames[category] || category}
            </span>
            <span class="text-gray-600 text-sm">
              {published.toLocaleDateString('en-AU', {
                year: 'numeric',
                month: 'long',
                day: 'numeric'
              })}
            </span>
          </div>
          <h1 class="2xl:text-5xl lg:text-4xl text-3xl font-jakarta font-bold text-pycon-black leading-tight">
            {title}
          </h1>
        </header>

        <!-- Post content -->
        <article class="
        prose prose-lg 2xl:prose-xl max-w-none mb-20
          prose-headings:font-jakarta prose-headings:font-bold prose-headings:text-pycon-black
          prose-h2:text-3xl prose-h2:mt-12 prose-h2:mb-6
          prose-h3:text-2xl prose-h3:mt-8 prose-h3:mb-4
          prose-p:font-inter prose-p:text-xs prose-p:leading-relaxed prose-p:mb-10 prose-p:text-gray-800
          lg:prose-p:text-base 2xl:prose-p:text-[1.375rem] 2xl:prose-p:leading-relaxed
          prose-a:text-pycon-purple prose-a:font-semibold prose-a:no-underline hover:prose-a:underline hover:prose-a:text-purple-800
          prose-strong:text-pycon-black prose-strong:font-bold
          prose-ul:my-6 prose-ul:list-disc prose-ul:pl-6
          prose-ol:my-6 prose-ol:list-decimal prose-ol:pl-6
          prose-li:mb-2 prose-li:text-xs lg:prose-li:text-base prose-li:leading-relaxed
          prose-blockquote:border-l-4 prose-blockquote:border-pycon-purple prose-blockquote:pl-6 prose-blockquote:italic prose-blockquote:text-gray-700
          prose-img:border prose-img:border-brand-dark prose-img:rounded-[1rem] prose-img:max-w-[80%] prose-img:mx-auto

          ">
          <slot />
        </article>
      </div>
    </div>
  </section>

  <SocialLinks />
  <Footer />
  <ImageModal />
</Base>
